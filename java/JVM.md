# JVM (JAVA Virtual Machine)

OS에 종속적이지 않고 자바에서 실행할 수 있게 하는 스택 기반의 가상 머신

- JVM의 중요한 역할 중 하나 -> Garbage Collection(GC)을 통한 메모리 관리
- 스택 기반 가상 머신이란?
	- 스택 구조로 피연산자와 연산 후 결과를 스택에 저장

### JVM은 어떻게 Java 코드를 컴파일하고 실행하는가?

- 컴파일(Compile)이란 개발자가 작성한 소스코드를 바이너리 코드(컴퓨터가 이해할 수 있는 기계 언어)로 변환하는 과정

> JVM을 통해 자바 코드가 실행되는 과정

![[Pasted image 20231229095404.png]]

**1. 프로그램이 실행되면 JVM은 OS로부터 이 프로그램이 필요로 하는 메모리를 할당받습니다. JVM은 이 메모리를 용도에 따라 여러 영역으로 나누어 관리하죠.**

  
**2. 자바 컴파일러(javac)가 자바 소스코드(.java)를 읽어들여 자바 바이트코드(.class)로 변환시킵니다. 위 그림 왼쪽 상단의 회색 부분을 보시면 됩니다.**

  
**3. 클래스 로더(Class Loader)는 .class파일들을 읽고 바이트 코드를 메서드 영역(Method Area)에 저장합니다. 각 .class 파일은 JVM에 의해 메서드 영역에 다음의 정보들을 저장합니다.**

- 로드된 클래스를 비롯한 그의 부모 클래스 정보
- class 파일이 Class, Interface, Enum과 관련이 있는지 여부
- 변수나 메서드의 정보 등

**4. .class파일이 로딩(Loading)된 후, JVM은 힙 메모리 영역에 이 파일이 나타내는 클래스 유형의 객체를 생성합니다.**

**5. 이 후 클래스 로더는 Linking을 통해 여러개로 분리된 소스파일들을 컴파일한 결과물들 중에서 최종 실행 가능한 파일을 만들기 위해 필요한 부분을 찾아서 연결해줍니다.**

**6. static으로 선언된 변수와 메서드에 메모리를 할당하고 초기값을 Initialize합니다.**

  
**7. .class 파일들은 Execution engine을 통해 해석됩니다.**

  
**8. 해석된 바이트코드는 Runtime Data Area에 배치되어 실질적인 수행이 이루어지게 됩니다.**

  
**9. 이러한 실행과정 속에서 JVM은 필요에 따라 Thread Synchronization과 GC같은 관리 작업을 수행합니다.**